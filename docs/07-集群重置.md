# ðŸ”„ é›†ç¾¤é‡ç½®æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•å®‰å…¨åœ°é‡ç½® Kubernetes é›†ç¾¤ï¼Œæ¸…é™¤æ‰€æœ‰é›†ç¾¤æ•°æ®å’Œé…ç½®ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚

## ðŸ“‹ é‡ç½®æ¦‚è¿°

### ä»€ä¹ˆæ˜¯é›†ç¾¤é‡ç½®ï¼Ÿ

é›†ç¾¤é‡ç½®æ˜¯æŒ‡å®Œå…¨æ¸…é™¤ Kubernetes é›†ç¾¤çš„æ‰€æœ‰æ•°æ®ã€é…ç½®å’ŒçŠ¶æ€ï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹æ¢å¤åˆ°å®‰è£…å‰çš„å¹²å‡€çŠ¶æ€ã€‚è¿™ä¸ªæ“ä½œä¼šï¼š

- **ðŸ—‘ï¸ åˆ é™¤æ‰€æœ‰ Pod å’Œå®¹å™¨**
- **ðŸ” æ¸…é™¤è¯ä¹¦å’Œå¯†é’¥**
- **âš™ï¸ åˆ é™¤é…ç½®æ–‡ä»¶**
- **ðŸ—„ï¸ æ¸…ç©º Etcd æ•°æ®**
- **ðŸ”§ åœæ­¢ç›¸å…³æœåŠ¡**
- **ðŸ“ æ¸…ç†æ•°æ®ç›®å½•**

### é‡ç½®ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æè¿° | å»ºè®®æ“ä½œ |
|:-----|:-----|:---------|
| **éƒ¨ç½²å¤±è´¥** | åˆå§‹éƒ¨ç½²è¿‡ç¨‹å‡ºé”™ | é‡ç½®åŽé‡æ–°éƒ¨ç½² |
| **æµ‹è¯•å®Œæˆ** | æµ‹è¯•çŽ¯å¢ƒä¸å†éœ€è¦ | é‡ç½®é‡Šæ”¾èµ„æº |
| **é…ç½®é”™è¯¯** | é›†ç¾¤é…ç½®ä¸¥é‡é”™è¯¯ | é‡ç½®åŽé‡æ–°é…ç½® |
| **çŽ¯å¢ƒè¿ç§»** | éœ€è¦æ›´æ¢é›†ç¾¤çŽ¯å¢ƒ | å¤‡ä»½â†’é‡ç½®â†’é‡å»º |
| **å®‰å…¨äº‹ä»¶** | é›†ç¾¤é­å—å®‰å…¨å¨èƒ | é‡ç½®åŽåŠ å¼ºå®‰å…¨ |

## âš ï¸ é‡ç½®å‰é‡è¦æé†’

### ðŸš¨ æ•°æ®ä¸¢å¤±è­¦å‘Š

> **âš ï¸ å±é™©æ“ä½œ**: é›†ç¾¤é‡ç½®ä¼š**æ°¸ä¹…åˆ é™¤**æ‰€æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
> - æ‰€æœ‰ Kubernetes èµ„æºï¼ˆPodã€Serviceã€Deployment ç­‰ï¼‰
> - ç”¨æˆ·æ•°æ®å’Œåº”ç”¨çŠ¶æ€
> - é›†ç¾¤é…ç½®å’Œè¯ä¹¦
> - Etcd å­˜å‚¨çš„æ‰€æœ‰æ•°æ®
> - ç½‘ç»œé…ç½®å’Œç­–ç•¥

### ðŸ“‹ é‡ç½®å‰æ£€æŸ¥æ¸…å•

- [ ] **æ•°æ®å¤‡ä»½**: ç¡®è®¤é‡è¦æ•°æ®å·²å¤‡ä»½
- [ ] **ä¸šåŠ¡ç¡®è®¤**: ç¡®è®¤æ‰€æœ‰ä¸šåŠ¡å¯ä»¥ä¸­æ–­
- [ ] **æƒé™éªŒè¯**: ç¡®è®¤å…·æœ‰æ“ä½œæƒé™
- [ ] **æ—¶é—´çª—å£**: é€‰æ‹©åˆé€‚çš„ç»´æŠ¤æ—¶é—´
- [ ] **é€šçŸ¥ç›¸å…³äººå‘˜**: æå‰é€šçŸ¥ä½¿ç”¨é›†ç¾¤çš„å›¢é˜Ÿ
- [ ] **æ¸…ç†è®¡åˆ’**: åˆ¶å®šé‡ç½®åŽçš„æ¸…ç†è®¡åˆ’

### ðŸ’¾ å»ºè®®çš„é‡ç½®å‰å¤‡ä»½

```bash
# 1. å¤‡ä»½é‡è¦åº”ç”¨é…ç½®
kubectl get all --all-namespaces -o yaml > cluster-resources-backup.yaml

# 2. å¤‡ä»½è‡ªå®šä¹‰èµ„æº
kubectl get crd -o yaml > custom-resources-backup.yaml

# 3. å¤‡ä»½ ConfigMaps å’Œ Secrets
kubectl get configmaps --all-namespaces -o yaml > configmaps-backup.yaml
kubectl get secrets --all-namespaces -o yaml > secrets-backup.yaml

# 4. æ‰§è¡Œå®Œæ•´é›†ç¾¤å¤‡ä»½
ansible-playbook -i example/hosts.m-master.ip.ini 93-backup-cluster.yml

# 5. è®°å½•å½“å‰é›†ç¾¤çŠ¶æ€
kubectl get nodes -o wide > cluster-status-backup.txt
kubectl get pods --all-namespaces > pods-status-backup.txt
```

## ðŸš€ æ‰§è¡Œé›†ç¾¤é‡ç½®

### æ–¹æ³•ä¸€ï¼šåŸºæœ¬é…ç½®é‡ç½®

é€‚ç”¨äºŽä½¿ç”¨é»˜è®¤é…ç½®éƒ¨ç½²çš„é›†ç¾¤ï¼š

```bash
# æ‰§è¡Œé›†ç¾¤é‡ç½®
ansible-playbook -i example/hosts.m-master.ip.ini 99-reset-cluster.yml
```

### æ–¹æ³•äºŒï¼šé«˜çº§é…ç½®é‡ç½®

é€‚ç”¨äºŽä½¿ç”¨è‡ªå®šä¹‰é…ç½®éƒ¨ç½²çš„é›†ç¾¤ï¼š

```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ‰§è¡Œé‡ç½®
ansible-playbook -i example/hosts.m-master.ip.ini -e @example/variables.yaml 99-reset-cluster.yml
```

> **é‡è¦è¯´æ˜Ž**: 
> - å¦‚æžœé›†ç¾¤éƒ¨ç½²æ—¶ä½¿ç”¨äº† `example/variables.yaml` æ–‡ä»¶ï¼Œé‡ç½®æ—¶ä¹Ÿå¿…é¡»ä½¿ç”¨ç›¸åŒçš„é…ç½®å‚æ•°
> - å½“ `example/hosts.m-master.ip.ini` ä¸Ž `example/variables.yaml` å˜é‡å†²çªæ—¶ï¼Œ`example/variables.yaml` ä¸­çš„å˜é‡å€¼ä¼˜å…ˆçº§æœ€é«˜

### äº¤äº’å¼é‡ç½®ç¡®è®¤

```bash
# åˆ›å»ºå®‰å…¨é‡ç½®è„šæœ¬
cat > safe-reset.sh << 'EOF'
#!/bin/bash

set -e

echo "ðŸš¨ Kubernetes é›†ç¾¤é‡ç½®å·¥å…·"
echo "================================"
echo ""
echo "âš ï¸  è­¦å‘Š: æ­¤æ“ä½œå°†å®Œå…¨åˆ é™¤é›†ç¾¤çš„æ‰€æœ‰æ•°æ®ï¼"
echo "ðŸ“‹ åŒ…æ‹¬: Podã€Serviceã€é…ç½®ã€è¯ä¹¦ã€Etcdæ•°æ®ç­‰"
echo ""

# æ˜¾ç¤ºå½“å‰é›†ç¾¤çŠ¶æ€
echo "ðŸ“Š å½“å‰é›†ç¾¤çŠ¶æ€:"
kubectl get nodes 2>/dev/null || echo "æ— æ³•è¿žæŽ¥åˆ°é›†ç¾¤"
echo ""

# äºŒæ¬¡ç¡®è®¤
read -p "ðŸ¤” æ‚¨ç¡®å®šè¦é‡ç½®é›†ç¾¤å—ï¼Ÿè¯·è¾“å…¥ 'YES' ç¡®è®¤: " CONFIRM
if [ "$CONFIRM" != "YES" ]; then
    echo "âŒ æ“ä½œå·²å–æ¶ˆ"
    exit 1
fi

echo ""
read -p "ðŸ”„ æœ€åŽç¡®è®¤ï¼šè¿™å°†åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œè¯·å†æ¬¡è¾“å…¥ 'DELETE' ç¡®è®¤: " FINAL_CONFIRM
if [ "$FINAL_CONFIRM" != "DELETE" ]; then
    echo "âŒ æ“ä½œå·²å–æ¶ˆ"
    exit 1
fi

echo ""
echo "ðŸš€ å¼€å§‹æ‰§è¡Œé›†ç¾¤é‡ç½®..."

# æ£€æŸ¥é…ç½®æ–‡ä»¶
if [ -f "example/variables.yaml" ]; then
    echo "ðŸ“‹ ä½¿ç”¨é«˜çº§é…ç½®æ‰§è¡Œé‡ç½®"
    ansible-playbook -i example/hosts.m-master.ip.ini -e @example/variables.yaml 99-reset-cluster.yml
else
    echo "ðŸ“‹ ä½¿ç”¨åŸºæœ¬é…ç½®æ‰§è¡Œé‡ç½®"
    ansible-playbook -i example/hosts.m-master.ip.ini 99-reset-cluster.yml
fi

if [ $? -eq 0 ]; then
    echo ""
    echo "âœ… é›†ç¾¤é‡ç½®å®Œæˆï¼"
    echo "ðŸ’¡ å»ºè®®é‡å¯æ‰€æœ‰èŠ‚ç‚¹ä»¥ç¡®ä¿å®Œå…¨æ¸…ç†"
else
    echo ""
    echo "âŒ é›†ç¾¤é‡ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—"
fi
EOF

chmod +x safe-reset.sh
./safe-reset.sh
```

## ðŸ”„ é‡ç½®æµç¨‹è¯¦è§£

### é‡ç½®æ­¥éª¤è¯´æ˜Ž

1. **ðŸ›‘ åœæ­¢æœåŠ¡**
   - åœæ­¢ kubelet æœåŠ¡
   - åœæ­¢å®¹å™¨è¿è¡Œæ—¶æœåŠ¡
   - åœæ­¢å…¶ä»–ç›¸å…³æœåŠ¡

2. **ðŸ—‘ï¸ æ¸…ç†å®¹å™¨**
   - åˆ é™¤æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨
   - æ¸…ç†å®¹å™¨é•œåƒï¼ˆå¯é€‰ï¼‰
   - æ¸…ç©ºå®¹å™¨æ•°æ®ç›®å½•

3. **ðŸ“ åˆ é™¤é…ç½®æ–‡ä»¶**
   - åˆ é™¤ `/etc/kubernetes/` ç›®å½•
   - åˆ é™¤ kubelet é…ç½®æ–‡ä»¶
   - æ¸…ç†è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶

4. **ðŸ—„ï¸ æ¸…ç†æ•°æ®ç›®å½•**
   - æ¸…ç©º Etcd æ•°æ®ç›®å½•
   - æ¸…ç† kubelet æ•°æ®ç›®å½•
   - åˆ é™¤ç½‘ç»œé…ç½®æ–‡ä»¶

5. **ðŸ”§ ç³»ç»Ÿæ¸…ç†**
   - é‡ç½® iptables è§„åˆ™
   - æ¸…ç†ç½‘ç»œå‘½åç©ºé—´
   - æ¢å¤ç³»ç»Ÿè®¾ç½®

6. **ðŸ”„ æœåŠ¡é‡ç½®**
   - é‡ç½® systemd æœåŠ¡çŠ¶æ€
   - æ¸…ç†æœåŠ¡é…ç½®æ–‡ä»¶
   - æ¢å¤é»˜è®¤è®¾ç½®

### ç›‘æŽ§é‡ç½®è¿‡ç¨‹

```bash
# ç›‘æŽ§ Ansible æ‰§è¡Œè¿‡ç¨‹
tail -f /tmp/ansible.log

# æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€ï¼ˆé‡ç½®å®ŒæˆåŽåº”è¯¥æ— æ³•è¿žæŽ¥ï¼‰
kubectl get nodes

# æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
ps aux | grep -E "(kube|etcd|docker|containerd)"

# æ£€æŸ¥ç½‘ç»œçŠ¶æ€
ip route show
iptables -L
```

## âœ… é‡ç½®åŽéªŒè¯

### 1. éªŒè¯æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥ Kubernetes ç›¸å…³æœåŠ¡çŠ¶æ€
systemctl status kubelet || echo "kubelet å·²åœæ­¢"
systemctl status docker || echo "docker å·²åœæ­¢"
systemctl status containerd || echo "containerd å·²åœæ­¢"

# æ£€æŸ¥ç›¸å…³è¿›ç¨‹
ps aux | grep -E "(kube|etcd)" | grep -v grep || echo "æ²¡æœ‰ Kubernetes è¿›ç¨‹è¿è¡Œ"
```

### 2. éªŒè¯æ–‡ä»¶æ¸…ç†

```bash
# æ£€æŸ¥é…ç½®ç›®å½•
ls -la /etc/kubernetes/ 2>/dev/null || echo "âœ… Kubernetes é…ç½®ç›®å½•å·²åˆ é™¤"

# æ£€æŸ¥æ•°æ®ç›®å½•
ls -la /var/lib/kubelet/ 2>/dev/null || echo "âœ… kubelet æ•°æ®ç›®å½•å·²åˆ é™¤"
ls -la /var/lib/etcd/ 2>/dev/null || echo "âœ… etcd æ•°æ®ç›®å½•å·²åˆ é™¤"

# æ£€æŸ¥è¯ä¹¦ç›®å½•
ls -la /etc/kubernetes/pki/ 2>/dev/null || echo "âœ… è¯ä¹¦ç›®å½•å·²åˆ é™¤"
```

### 3. éªŒè¯ç½‘ç»œæ¸…ç†

```bash
# æ£€æŸ¥å®¹å™¨ç½‘ç»œ
docker network ls 2>/dev/null | grep -v "bridge\|host\|none" || echo "âœ… å®¹å™¨ç½‘ç»œå·²æ¸…ç†"

# æ£€æŸ¥ç½‘ç»œæŽ¥å£
ip link show | grep -E "(cni|flannel|calico)" || echo "âœ… CNI ç½‘ç»œæŽ¥å£å·²æ¸…ç†"

# æ£€æŸ¥ iptables è§„åˆ™
iptables -L | grep -E "(KUBE|CNI)" || echo "âœ… Kubernetes iptables è§„åˆ™å·²æ¸…ç†"
```

### 4. éªŒè¯å®¹å™¨æ¸…ç†

```bash
# æ£€æŸ¥è¿è¡Œä¸­çš„å®¹å™¨
docker ps -a 2>/dev/null | grep -E "(kube|etcd|pause)" || echo "âœ… Kubernetes å®¹å™¨å·²æ¸…ç†"

# æˆ–ä½¿ç”¨ crictlï¼ˆcontainerdï¼‰
crictl ps -a 2>/dev/null | grep -E "(kube|etcd|pause)" || echo "âœ… Kubernetes å®¹å™¨å·²æ¸…ç†"
```

## ðŸ§¹ é‡ç½®åŽæ¸…ç†

### ç³»ç»Ÿé‡å¯å»ºè®®

```bash
# åˆ›å»ºé‡å¯è„šæœ¬
cat > post-reset-reboot.sh << 'EOF'
#!/bin/bash

echo "ðŸ”„ é›†ç¾¤é‡ç½®åŽæ¸…ç†å·¥å…·"
echo "===================="

# æ˜¾ç¤ºé‡ç½®éªŒè¯ç»“æžœ
echo "ðŸ“‹ éªŒè¯é‡ç½®ç»“æžœ..."
echo ""

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "ðŸ” æ£€æŸ¥æœåŠ¡çŠ¶æ€:"
systemctl is-active kubelet && echo "âš ï¸ kubelet ä»åœ¨è¿è¡Œ" || echo "âœ… kubelet å·²åœæ­¢"
systemctl is-active docker && echo "âš ï¸ docker ä»åœ¨è¿è¡Œ" || echo "âœ… docker å·²åœæ­¢"

# æ£€æŸ¥è¿›ç¨‹
echo ""
echo "ðŸ” æ£€æŸ¥ Kubernetes è¿›ç¨‹:"
K8S_PROCESSES=$(ps aux | grep -E "(kube|etcd)" | grep -v grep | wc -l)
if [ "$K8S_PROCESSES" -gt 0 ]; then
    echo "âš ï¸ å‘çŽ° $K8S_PROCESSES ä¸ª Kubernetes ç›¸å…³è¿›ç¨‹"
    ps aux | grep -E "(kube|etcd)" | grep -v grep
else
    echo "âœ… æ²¡æœ‰ Kubernetes ç›¸å…³è¿›ç¨‹è¿è¡Œ"
fi

echo ""
echo "ðŸ’¡ å»ºè®®é‡å¯æ‰€æœ‰èŠ‚ç‚¹ä»¥ç¡®ä¿å®Œå…¨æ¸…ç†æ®‹ç•™æ–‡ä»¶"
echo ""

read -p "ðŸ”„ æ˜¯å¦çŽ°åœ¨é‡å¯å½“å‰èŠ‚ç‚¹ï¼Ÿ(y/N): " REBOOT_CONFIRM
if [ "$REBOOT_CONFIRM" = "y" ] || [ "$REBOOT_CONFIRM" = "Y" ]; then
    echo "ðŸ”„ æ­£åœ¨é‡å¯èŠ‚ç‚¹..."
    sudo shutdown -r now
else
    echo "â„¹ï¸ è¯·ç¨åŽæ‰‹åŠ¨é‡å¯èŠ‚ç‚¹"
fi
EOF

chmod +x post-reset-reboot.sh
```

### æ‰‹åŠ¨æ¸…ç†è„šæœ¬

```bash
# åˆ›å»ºæ‰‹åŠ¨æ¸…ç†è„šæœ¬ï¼ˆç”¨äºŽå¤„ç†æ®‹ç•™æ–‡ä»¶ï¼‰
cat > manual-cleanup.sh << 'EOF'
#!/bin/bash

echo "ðŸ§¹ æ‰‹åŠ¨æ¸…ç†æ®‹ç•™æ–‡ä»¶"
echo "=================="

# æ¸…ç†å¯èƒ½çš„æ®‹ç•™ç›®å½•
echo "ðŸ—‘ï¸ æ¸…ç†æ®‹ç•™ç›®å½•..."
sudo rm -rf /var/lib/kubelet/
sudo rm -rf /var/lib/etcd/
sudo rm -rf /etc/kubernetes/
sudo rm -rf /var/lib/cni/
sudo rm -rf /etc/cni/
sudo rm -rf /opt/cni/

# æ¸…ç†å®¹å™¨æ•°æ®
echo "ðŸ—‘ï¸ æ¸…ç†å®¹å™¨æ•°æ®..."
sudo rm -rf /var/lib/docker/containers/
sudo rm -rf /var/lib/containerd/

# æ¸…ç†ç½‘ç»œé…ç½®
echo "ðŸ”— é‡ç½®ç½‘ç»œé…ç½®..."
sudo iptables -F
sudo iptables -t nat -F
sudo iptables -t mangle -F
sudo iptables -X

# æ¸…ç† systemd æœåŠ¡æ–‡ä»¶
echo "ðŸ”§ æ¸…ç†æœåŠ¡æ–‡ä»¶..."
sudo rm -f /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
sudo systemctl daemon-reload

echo "âœ… æ‰‹åŠ¨æ¸…ç†å®Œæˆ"
echo "ðŸ’¡ å»ºè®®é‡å¯ç³»ç»Ÿä»¥ç¡®ä¿å®Œå…¨æ¸…ç†"
EOF

chmod +x manual-cleanup.sh
```

## ðŸ› ï¸ æ•…éšœæŽ’æŸ¥

### é‡ç½®å¤±è´¥é—®é¢˜

#### 1. Ansible æ‰§è¡Œå¤±è´¥

**ç—‡çŠ¶**: é‡ç½®è¿‡ç¨‹ä¸­ Ansible æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
ansible -i example/hosts.m-master.ip.ini all -m ping

# æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
ansible -i example/hosts.m-master.ip.ini all -m command -a "uptime"

# æ‰‹åŠ¨å¼ºåˆ¶é‡ç½®ï¼ˆè°¨æ…Žä½¿ç”¨ï¼‰
ansible -i example/hosts.m-master.ip.ini all -m shell -a "kubeadm reset --force"
```

#### 2. æœåŠ¡æ— æ³•åœæ­¢

**ç—‡çŠ¶**: kubelet æˆ–å…¶ä»–æœåŠ¡æ— æ³•åœæ­¢

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¼ºåˆ¶åœæ­¢æœåŠ¡
sudo systemctl stop kubelet --force
sudo systemctl stop docker --force
sudo systemctl stop containerd --force

# æ€æ­»ç›¸å…³è¿›ç¨‹
sudo pkill -f kubelet
sudo pkill -f dockerd
sudo pkill -f containerd
```

#### 3. æ–‡ä»¶åˆ é™¤å¤±è´¥

**ç—‡çŠ¶**: é…ç½®æ–‡ä»¶æˆ–æ•°æ®ç›®å½•æ— æ³•åˆ é™¤

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ–‡ä»¶å ç”¨
sudo lsof | grep -E "(kubernetes|etcd|kubelet)"

# å¼ºåˆ¶è§£é™¤æŒ‚è½½
sudo umount -f /var/lib/kubelet/pods/*/volumes/kubernetes.io~secret/*
sudo umount -f /var/lib/kubelet/pods/*/volumes/kubernetes.io~configmap/*

# å¼ºåˆ¶åˆ é™¤æ–‡ä»¶
sudo rm -rf /etc/kubernetes/
sudo rm -rf /var/lib/kubelet/
sudo rm -rf /var/lib/etcd/
```

## ðŸ“‹ é‡ç½®åŽé‡å»ºé›†ç¾¤

### é‡æ–°éƒ¨ç½²å‡†å¤‡

é‡ç½®å®ŒæˆåŽï¼Œå¦‚æžœéœ€è¦é‡æ–°éƒ¨ç½²é›†ç¾¤ï¼š

```bash
# 1. é‡å¯æ‰€æœ‰èŠ‚ç‚¹ï¼ˆæŽ¨èï¼‰
sudo reboot

# 2. éªŒè¯èŠ‚ç‚¹çŠ¶æ€
uptime
free -h
df -h

# 3. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
ansible -i example/hosts.m-master.ip.ini all -m ping

# 4. é‡æ–°éƒ¨ç½²é›†ç¾¤
ansible-playbook -i example/hosts.m-master.ip.ini 90-init-cluster.yml
```

### é…ç½®æ–‡ä»¶æ›´æ–°

```bash
# å¦‚æžœéœ€è¦ä¿®æ”¹é…ç½®ï¼Œç¼–è¾‘ç›¸å…³æ–‡ä»¶
vim example/hosts.m-master.ip.ini
vim example/variables.yaml

# ç¡®ä¿æ—¶é—´åŒæ­¥
ansible -i example/hosts.m-master.ip.ini all -m command -a "chrony sources -v"
```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [ðŸš€ é›†ç¾¤å®‰è£…](01-é›†ç¾¤å®‰è£….md) - é‡ç½®åŽé‡æ–°éƒ¨ç½²
- [ðŸ’¾ é›†ç¾¤å¤‡ä»½](05-é›†ç¾¤å¤‡ä»½.md) - é‡ç½®å‰çš„æ•°æ®å¤‡ä»½
- [ðŸ”„ é›†ç¾¤æ¢å¤](06-é›†ç¾¤æ¢å¤.md) - ä»Žå¤‡ä»½æ¢å¤é›†ç¾¤
- [ðŸ“‹ å®‰è£…é¡»çŸ¥](00-å®‰è£…é¡»çŸ¥.md) - äº†è§£ç³»ç»Ÿè¦æ±‚

## ðŸ“ž èŽ·å–å¸®åŠ©

å¦‚æžœåœ¨é›†ç¾¤é‡ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. ðŸ“– æŸ¥çœ‹è¯¦ç»†çš„ Ansible æ‰§è¡Œæ—¥å¿—
2. ðŸ” æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—å’Œè¿›ç¨‹çŠ¶æ€
3. ðŸ› ï¸ å°è¯•æ‰‹åŠ¨æ¸…ç†è„šæœ¬
4. ðŸ› [æŠ¥å‘Šé—®é¢˜](https://github.com/TimeBye/Kubernetes/issues) èŽ·å–æŠ€æœ¯æ”¯æŒ

---

**é‡è¦æç¤º**:
- ðŸš¨ é‡ç½®æ“ä½œä¸å¯é€†ï¼ŒåŠ¡å¿…ç¡®è®¤åŽå†æ‰§è¡Œ
- ðŸ’¾ é‡ç½®å‰åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®
- ðŸ”„ é‡ç½®åŽå»ºè®®é‡å¯æ‰€æœ‰èŠ‚ç‚¹
- ðŸ“‹ è®°å½•é‡ç½®åŽŸå› å’Œè¿‡ç¨‹ï¼Œç”¨äºŽåŽç»­æ”¹è¿›
- ðŸ‘¥ é‡è¦çŽ¯å¢ƒå»ºè®®å¤šäººç¡®è®¤åŽæ“ä½œ